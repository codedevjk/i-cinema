# Application Properties
spring.application.name=backend
# Use PORT env var if available (Render default), otherwise 8080
server.port=${PORT:8080}

# Database Configuration
# Defaults are set to the provided TiDB Cluster credentials (2Kdhp7kH1qhV9b1.root)
# You can override these in Render Environment Variables if needed.
spring.datasource.url=${DB_URL:jdbc:mysql://gateway01.ap-southeast-1.prod.aws.tidbcloud.com:4000/test?sslMode=VERIFY_IDENTITY&enabledTLSProtocols=TLSv1.2,TLSv1.3}
spring.datasource.username=${DB_USERNAME:2Kdhp7kH1qhV9b1.root}
spring.datasource.password=${DB_PASSWORD:Ql4I2DfwJ4e8kGh4}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA Configuration
# DDL Auto is 'none' to allow schema.sql to handle table creation/updates
spring.jpa.hibernate.ddl-auto=none

# Initialization Scripts
# WARNING: 'always' mode combined with TRUNCATE in data.sql will WIPE data on every restart.
# Change to 'never' after initial setup if you want to persist data across restarts.
spring.sql.init.mode=always
spring.jpa.defer-datasource-initialization=true

spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# Logging
logging.level.com.icinema.service=DEBUG
